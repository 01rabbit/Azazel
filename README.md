# å¾¡èª¿å­é–€ -AZAZEL system- : The Cyber Scapegoat Gateway
![å¾¡èª¿å­é–€_logo](images/å¾¡èª¿å­é–€_logo.png)
## æ¦‚è¦ / Overview

**Delaying Actionï¼ˆé…æ»è¡Œå‹•ï¼‰** ã¨ã„ã†è¨€è‘‰ã‚’ã”å­˜çŸ¥ã§ã—ã‚‡ã†ã‹ï¼Ÿ
ã“ã‚Œã¯è»äº‹æˆ¦ç•¥ã«ãŠã„ã¦ã€é˜²å¾¡éƒ¨éšŠãŒæ±ºå®šçš„ãªæˆ¦é—˜ã‚’é¿ã‘ã¤ã¤ã€æ•µã®é€²æ’ƒã‚’å¯èƒ½ãªé™ã‚Šé…ã‚‰ã›ã‚‹ãŸã‚ã«æˆ¦ã„ç¶šã‘ã€æ™‚é–“ã‚’ç¨¼ããŸã‚ã®é˜²è¡›è¡Œå‹•ã‚’æ„å‘³ã—ã¾ã™ã€‚ä»Šæ—¥ã®ã‚µã‚¤ãƒãƒ¼æˆ¦ã§ã¯ã€æ”»æ’ƒãŒé«˜é€Ÿã‹ã¤è‡ªå‹•åŒ–ã•ã‚Œã€ã‚ãšã‹æ•°ç§’ã§è³‡ç”£ãŒä¾µå®³ã•ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®å¤å…¸çš„ãªæˆ¦è¡“æ€æƒ³ã‚’ã€ç¾ä»£ã®ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«å†è§£é‡ˆã—ã¦å¿œç”¨ã™ã¹ãã ã¨ç§ãŸã¡ã¯è€ƒãˆã¾ã—ãŸã€‚

ã“ã®è€ƒãˆæ–¹ã‚’ã‚‚ã¨ã«é–‹ç™ºã•ã‚ŒãŸã®ãŒ **å¾¡èª¿å­é–€ -Azazel System-** ã§ã™ã€‚æœ¬ãƒ„ãƒ¼ãƒ«ã¯ã€**ã‚¹ã‚±ãƒ¼ãƒ—ã‚´ãƒ¼ãƒˆå‹ãƒ‡ã‚³ã‚¤**ã‚’å®Ÿè£…ã—ã¦ãŠã‚Šã€æ”»æ’ƒã‚’å¸åã—ã€æ”»æ’ƒè€…ã‚’èª¤èª˜å°ã—ãªãŒã‚‰ã€ãã®é€²è¡Œã‚’æˆ¦è¡“çš„ã«é…å»¶ã•ã›ã¾ã™ã€‚å¾“æ¥ã®ãƒãƒ‹ãƒ¼ãƒãƒƒãƒˆã®ã‚ˆã†ã«å˜ã«è¦³å¯Ÿã™ã‚‹ã®ã§ã¯ãªãã€æ”»æ’ƒè€…ã‚’èƒ½å‹•çš„ã«æ‹˜æŸã—ã€**ã‚µã‚¤ãƒãƒ¼ç©ºé–“ã«ãŠã‘ã‚‹é…æ»è¡Œå‹•**ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

æœ¬ãƒ„ãƒ¼ãƒ«ã¯ã€å‡ºå¼µå…ˆã®ãƒ›ãƒ†ãƒ«ã‚„ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´ãªã©ã®**ä¿¡é ¼ã§ããªã„å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**ã«æ¥ç¶šã™ã‚‹éš›ã‚„ã€**ä¸€æ™‚çš„ãªãƒ©ãƒœç’°å¢ƒ**ã‚’å®ˆã‚‹å¿…è¦ãŒã‚ã‚‹å ´é¢ã«ãŠã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’èƒ½å‹•çš„ã«ä¿è­·ã™ã‚‹**å¯æ¬å‹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤**ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

ç¾ä»£ã®æˆ¦å ´ã¯ã‚µã‚¤ãƒãƒ¼ç©ºé–“ã¸ã¨ç§»ã‚Šã¾ã—ãŸãŒã€ã€Œæ™‚é–“ã‚’ç¨¼ããŸã‚ã«æ•µã‚’æ‹˜æŸã™ã‚‹ã€ã¨ã„ã†ç™ºæƒ³ã¯ä»Šã‚‚é€šç”¨ã—ã¾ã™ã€‚**å¾¡èª¿å­é–€**ã¯ã€ã‚µã‚¤ãƒãƒ¼æˆ¦ã«ãŠã‘ã‚‹ã€Œæˆ¦è¡“çš„è¶³æ­¢ã‚ã€ã‚’å…·ç¾åŒ–ã™ã‚‹ãŸã‚ã®ã€ä¸€ã¤ã®ç­”ãˆã§ã™ã€‚

**Azazel System** is a portable active cyber defense tool inspired by the classical military concept of **Delaying Action**â€”a defensive operation aimed at slowing the enemy's advance while avoiding decisive engagement. In the age of automated and lightning-fast cyber attacks, where assets can be compromised within seconds, we believe this timeless strategy deserves modern re-implementation.

The system uses a **scapegoat-style decoy** to absorb, mislead, and delay adversaries. Unlike traditional honeypots that passively observe, Azazel actively restrains attacker behavior to buy timeâ€”a tactical "delaying action" in cyberspace.

This tool is designed for use in **untrusted external environments**â€”such as hotel Wi-Fi, public venues, or temporary lab setupsâ€”where users need portable, proactive protection.

Though the battlefield has shifted into cyberspace, the principle of "binding the enemy to buy time" remains effective. **Azazel System** provides a modern response to that strategic need.

---

## è¨­è¨ˆæ€æƒ³ / Design Philosophy

å¾¡èª¿å­é–€ -AZAZEL system- ã®é˜²å¾¡æ€æƒ³ã¯ã€æ—¥æœ¬ã«ãŠã‘ã‚‹äºŒã¤ã®æˆ¦è¡“çš„æ¦‚å¿µã«ç€æƒ³ã‚’å¾—ã¦ã„ã¾ã™ã€‚

ã²ã¨ã¤ã¯ã€æ—¥æœ¬é™¸è»ã«ãŠã‘ã‚‹é˜²å¾¡æˆ¦è¡“ã®åŸå‰‡ã§ã‚ã‚‹ã€Œ**æ•µã‚’æˆ¦å ´ã«æ‹˜æŸã™ã‚‹**ã€ã¨ã„ã†è€ƒãˆæ–¹ã§ã™ã€‚ã“ã‚Œã¯ã€æ•µã®æ”»æ’ƒã‚’ãŸã é˜²ãã®ã§ã¯ãªãã€ã‚ãˆã¦æˆ¦å ´ã«å¼•ãç•™ã‚ã€æ•µã®è¡Œå‹•ã‚’åˆ¶é™ã—ãªãŒã‚‰ã€å‘³æ–¹ã®å¾Œç¶šæº–å‚™ã‚„åæ’ƒã®æ™‚é–“ã‚’ç¨¼ãã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚å¾¡èª¿å­é–€ã‚‚ã“ã‚Œã¨åŒæ§˜ã«ã€ä¾µå…¥è€…ã‚’ã‚·ã‚¹ãƒ†ãƒ ä¸Šã«èª˜å°ã—ã€ãƒ‡ã‚³ã‚¤ã‚„é€šä¿¡é…å»¶ã®ä¸­ã«æ‹˜æŸã™ã‚‹ã“ã¨ã§ã€æ”»æ’ƒã®è‡ªç”±åº¦ã‚’å¥ªã„ã€é˜²å¾¡å´ã«ä¸»å°æ¨©ã‚’æ¸¡ã™æ§‹é€ ã‚’ã¨ã£ã¦ã„ã¾ã™ã€‚

ã‚‚ã†ã²ã¨ã¤ã¯ã€æ—¥æœ¬å¤æ¥ã®æ­¦è¡“ã«ãŠã‘ã‚‹ã€Œ**å¾Œã®å…ˆï¼ˆã”ã®ã›ã‚“ï¼‰**ã€ã¨ã„ã†æˆ¦ã„æ–¹ã§ã™ã€‚ã“ã‚Œã¯ã€ç›¸æ‰‹ã®å‹•ãã‚’è¦‹ã¦ã‹ã‚‰åå¿œã™ã‚‹ã“ã¨ã§ã€é€†ã«ä¸»å°æ¨©ã‚’æ¡ã‚‹ã¨ã„ã†é«˜åº¦ãªæˆ¦è¡“ã§ã™ã€‚è¦‹ã‹ã‘ä¸Šã¯å¾Œæ‰‹ã«è¦‹ãˆã¦ã‚‚ã€å®Ÿéš›ã«ã¯ç›¸æ‰‹ã®æ”»æ’ƒã‚’åˆ©ç”¨ã—ã¦ã€åˆ¶å¾¡ã—ã€åæ’ƒã®æ©Ÿã‚’å¾—ã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚å¾¡èª¿å­é–€ã§ã¯ã€Suricataã«ã‚ˆã‚‹ä¾µå…¥æ¤œçŸ¥å¾Œã«é…æ»åˆ¶å¾¡ã‚’ç™ºå‹•ã™ã‚‹ã“ã¨ã§ã€ã“ã®ã€Œå¾Œã®å…ˆã€ã®æ§‹ãˆã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚æ”»æ’ƒã‚’ã‚ãˆã¦å¼•ãå—ã‘ã€è¦³å¯Ÿã—ã€åˆ¶å¾¡ã™ã‚‹ã¨ã„ã†æˆ¦è¡“çš„ãªå¯¾å¿œãŒã€ã“ã®æ€æƒ³ã«é€šã˜ã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€å¾¡èª¿å­é–€ã¯ã€Œé˜²å¾¡ã¨ã¯å˜ã«å®ˆã‚‹ã“ã¨ã§ã¯ãªãã€æ•µã®è¡Œå‹•ã‚’åˆ¶å¾¡ã—ã€æ™‚é–“ã‚’ç¨¼ãã“ã¨ã€ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ä½“ç¾ã—ã¦ãŠã‚Šã€æ—¥æœ¬çš„ãªæˆ¦è¡“æ€æƒ³ã«æ ¹ã–ã—ãŸã‚µã‚¤ãƒãƒ¼ãƒ‡ã‚»ãƒ—ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

**Azazel System** is rooted in two key Japanese strategic doctrines:

- The **Imperial Japanese Armyâ€™s principle of battlefield containment**â€”not simply blocking the enemy, but intentionally binding them to a location to limit their actions and buy time for reinforcements or counteroffensives.

- The **martial arts concept of "Go no Sen"**, or taking initiative in response. Rather than preemptive strikes, this principle capitalizes on the opponent's move, using their momentum against them. Azazel embodies this by activating its response only after intrusion is detected, deliberately reacting to the attackerâ€™s behavior to assert control.

These principles converge in Azazelâ€™s design: **defense is not about passive protection, but about active control and strategic delay.**

---

## å¯æ¬å‹è¨­è¨ˆ / Portable Deployment

- **è»½é‡ãƒ»çœé›»åŠ›ãªæ§‹æˆã«ã‚ˆã‚Šã€å¤–å‡ºå…ˆã‚„ç¾å ´ãªã©ã®ä¸€æ™‚çš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šç’°å¢ƒã§ã‚‚å®¹æ˜“ã«å°å…¥å¯èƒ½ã§ã™ã€‚**  
*Lightweight and energy-efficient, enabling quick deployment in temporary and mobile environments.*

- **å‡ºå¼µæ™‚ã€ã‚¤ãƒ™ãƒ³ãƒˆä¼šå ´ã€å¤–éƒ¨æ¤œè¨¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒä¿è¨¼ã•ã‚Œãªã„å ´æ‰€ã§ã®åˆ©ç”¨ã«æœ€é©ã§ã™ã€‚**  
*Perfect for use during business trips, field operations, or in untrusted networks outside your primary infrastructure.*

## ç‰¹å¾´ / Features

- **é…æ»æˆ¦è¡“ã®å®Ÿè£… / Tactical Delaying**  
  é™¸æˆ¦ã«ãŠã‘ã‚‹ã€Œé…æ»è¡Œå‹•ã€ã®æ¦‚å¿µã‚’ã€ã‚µã‚¤ãƒãƒ¼ç©ºé–“ã«é©ç”¨ã€‚ä¾µå…¥ã‚’è¨±å®¹ã—ã¤ã¤ã€ãã®é€²è¡Œã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã€‚  
  *Applies the military concept of delaying action to cyberspaceâ€”permitting intrusion while strategically controlling its progression.*

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾µå…¥æ¤œçŸ¥ã¨åˆ¶å¾¡ / Real-Time IDS-based Control**  
  Suricata ã«ã‚ˆã‚‹ä¾µå…¥æ¤œçŸ¥ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã€æ”»æ’ƒå…ƒIPã®é€šä¿¡ã‚’ `tc` ã‚„ `iptables/nftables` ã«ã‚ˆã‚Šå‹•çš„ã«é…å»¶ãƒ»åˆ¶é™ã€‚  
  *Triggered by Suricata IDS alerts, dynamically throttles or restricts traffic from attacker IPs using `tc` and `iptables/nftables`.*

- **ã‚¹ã‚±ãƒ¼ãƒ—ã‚´ãƒ¼ãƒˆå‹ãƒ‡ã‚³ã‚¤ / Scapegoat Decoy**  
  OpenCanaryç­‰ã‚’åˆ©ç”¨ã—ã€æ”»æ’ƒè€…ã‚’è¦³å¯Ÿã§ã¯ãªãèª˜å°ãƒ»æ‹˜æŸã€‚æ­£è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯å½±éŸ¿ã‚’ä¸ãˆãšã«éš”é›¢ã€‚  
  *Leverages tools like OpenCanary to mislead and isolate attackersâ€”not merely observe themâ€”without affecting legitimate users.*

- **å¯æ¬å‹è¨­è¨ˆ / Portable Deployment**  
  è»½é‡æ§‹æˆã§Raspberry Piã«æœ€é©åŒ–ã€‚ç½å®³å¯¾å¿œã‚„ä¸€æ™‚çš„ãªç¾å ´å±•é–‹ã«ã‚‚å¯¾å¿œã€‚  
  *Lightweight and optimized for Raspberry Pi, enabling easy deployment in disaster recovery or temporary field operations.*

---

## ä½¿ç”¨æŠ€è¡“ / Stack

- Raspberry Pi OS (64bit Lite)
- Suricata (IDS/IPS)
- OpenCanary (Decoy Services)
- Vector (Log Collection)
- iptables / nftables + tc (Traffic Control)
- Mattermost (Alerting)
- Python + Scapy (Custom Response Logic)
- rsync + SSH (Optional Log Export)

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« / Installation

### ğŸ”§ å¿…è¦æ¡ä»¶ / Requirements
- Raspberry Pi OS (64bit Lite)
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š / Internet connection
- ç®¡ç†è€…æ¨©é™ï¼ˆsudoï¼‰ / Administrator privileges (sudo)

### ğŸ› ï¸ å°å…¥æ‰‹é † / Setup Instructions

```bash
git clone https://github.com/01rabbit/Azazel.git azazel
cd azazel
sudo bash install_azazel.sh          # æ—¥æœ¬èªå‡ºåŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
sudo bash install_azazel.sh --lang=en # è‹±èªå‡ºåŠ›
```

â€» `--lang=en` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€å‡ºåŠ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè‹±èªã«ãªã‚Šã¾ã™ã€‚  
Use `--lang=en` for English log/output.

- ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã‚’è‡ªå‹•ã§å®Ÿè¡Œã—ã¾ã™ï¼š  
  *The script automatically performs the following:*
  - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã‚·ã‚¹ãƒ†ãƒ æ›´æ–° / Install packages and update system
  - Suricataã®ãƒ«ãƒ¼ãƒ«åˆæœŸåŒ– / Initialize Suricata rules
  - å¿…è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼ï¼ˆVector, OpenCanaryãªã©ï¼‰ / Copy required config files (Vector, OpenCanary, etc.)
  - Dockerã‚³ãƒ³ãƒ†ãƒŠï¼ˆPostgreSQL, Vector, OpenCanaryï¼‰ã®èµ·å‹• / Start Docker containers (PostgreSQL, Vector, OpenCanary)
  - Mattermostã®å±•é–‹ã€è¨­å®šï¼ˆconfig.jsonè‡ªå‹•ç·¨é›†ï¼‰ã€systemdèµ·å‹•ç™»éŒ² / Deploy Mattermost, auto-configure `config.json`, and register with systemd

ãƒ­ã‚°ã¯ `/opt/azazel/logs/install_errors.log` ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚  
*Installation logs are saved to `/opt/azazel/logs/install_errors.log`.*

### âœ… å°å…¥å¾Œç¢ºèª / Post-Install Check
- Mattermost ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ï¼š  
  *Access Mattermost in your browser:*
  ```
  http://<your Raspberry Pi's IP address>:8065
  ```
- ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ã‚’ç¢ºèªï¼š  
  *Check container status:*
  ```bash
  cd /opt/azazel/containers
  docker-compose ps
  ```
- ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ï¼š  
  *Check Mattermost service status:*
  ```bash
  systemctl status mattermost
  ```

è©³ç´°ãªæ§‹æˆå†…å®¹ã‚„è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜ã¯ [`docs/setup.md`](docs/setup.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚  
See [`docs/setup.md`](docs/setup.md) for full setup instructions and configuration details.

---

## é–‹ç™ºã®èƒŒæ™¯ / Background

ç¾ä»£ã®ã‚µã‚¤ãƒãƒ¼æ”»æ’ƒã¯é«˜é€ŸåŒ–ãƒ»è‡ªå‹•åŒ–ã—ã€å¾“æ¥ã®ãƒãƒ‹ãƒ¼ãƒãƒƒãƒˆã§ã¯å¯¾å¿œãŒå›°é›£ã§ã™ã€‚æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€**å˜ãªã‚‹è¦³å¯Ÿã‚„ãƒ–ãƒ­ãƒƒã‚¯ã§ã¯ãªãã€æˆ¦è¡“çš„ã«é…ã‚‰ã›ã‚‹**ã“ã¨ã‚’ç›®çš„ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

As cyber attacks become faster and more automated, traditional honeypots fall short. This system embraces a **strategic delaying approach**, turning time into a defensive asset.

---

## ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ / Message

> é˜²å¾¡ã¨ã¯ã€æ™‚é–“ã‚’ç¨¼ãã“ã¨ã§ã‚ã‚‹ã€‚  
> Defense is the art of buying time.

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ / License

MIT License
